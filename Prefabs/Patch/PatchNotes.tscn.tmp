[gd_scene load_steps=15 format=2]

[ext_resource path="res://Fonts/Roboto-Black.ttf" type="DynamicFontData" id=1]
[ext_resource path="res://Fonts/Roboto-BlackItalic.ttf" type="DynamicFontData" id=3]
[ext_resource path="res://Fonts/Roboto-Medium.ttf" type="DynamicFontData" id=5]

[sub_resource type="GDScript" id=11]
script/source = "extends MarginContainer


var cont := {}



func _ready() -> void:
	
	get_node(\"v/buy/m/text\").text = get_confirm_text()



func setup(version: String):
	
	# version is the version in the save file that is being loaded
	
	# this func will populate display[] with strings that display() will work with
	
	get_node(\"v/header/v/desc\").text = \"Changes made since the last time you played (%s)!\"
	get_node(\"v/header/v/desc\").text = get_node(\"v/header/v/desc\").text % version
	
	var display := []
	
	
	if version.count(\".\") != 2:
		
		# for versions before 2.0.0 where they had jank versioning like 2.0 BETA (3)
		
		for x in gv.PATCH_NOTES:
			display.append(x)
		
		display(display)
		
		return
	
	
	var s_keys = version.split(\".\")
	
	for p in gv.PATCH_NOTES:
		
		# makes sure that this loop doesn't take too much time or performance
		if display.size() == 10:
			break
		
		var p_keys = p.split(\".\")
		
		# example:
		
		# if the version in the save is 2.0.3
		# and the latest version is 2.1.0
		
		# versions[0] == 2
		# versions[1] == 0
		# versions[2] == 3
		
		# (p_keys[0]) == 2
		# p_keys[1] == 1
		# p_keys[2] == 0
		
		# DO display patch notes for versions:
		# 2.0.4, 2.1.0
		
		# DO NOT display patch notes for versions:
		# 2.0.0, 2.0.1, 2.0.2, 2.0.3
		
		if int(s_keys[0]) < int(p_keys[0]):
			display.append(p)
			continue
		
		if int(s_keys[1]) < int(p_keys[1]):
			if int(s_keys[0]) <= int(p_keys[0]):
				display.append(p)
				continue
		
		if int(s_keys[2]) < int(p_keys[2]):
			if int(s_keys[1]) <= int(p_keys[1]):
				if int(s_keys[0]) <= int(p_keys[0]):
					display.append(p)
	
	if display.size() == 0:
		hide()
		return
	
	display(display)


func display(display: Array):
	
	# displays every patch in the display array
	# every key in display[] is a key in gv.PATCH_NOTES
	
	var i = 0
	for d in display:
		
		cont[d] = src.version.instance()
		cont[d].setup(d)
		get_node(\"v/sc/v\").add_child(cont[d])
		
		if i % 2 == 0:
			cont[d].get_node(\"bg\").hide()
		
		i += 1


func get_confirm_text() -> String:
	
	var roll = int(rand_range(0,10))
	
	match roll:
		0: return \"Cool!\"
		1: return \"Got it.\"
		2: return \"Yep.\"
		3: return \"Whatever!\"
		4: return \"Okay, then!\"
		5: return \"Okie dokie.\"
		6: return \"Coolio.\"
		7: return \"That's great.\"
		8: return \"Let me play.\"
		_: return \"Wow, so interesting.\"


func _on_button_pressed() -> void:
	hide()
"

[sub_resource type="StyleBoxFlat" id=1]
bg_color = Color( 0.0980392, 0.0980392, 0.0980392, 1 )
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color( 1, 0, 0.631373, 0.301961 )
expand_margin_left = 10.0
expand_margin_right = 10.0
expand_margin_top = 10.0
expand_margin_bottom = 10.0
shadow_color = Color( 0.054902, 0.054902, 0.054902, 1 )
shadow_size = 10

[sub_resource type="StyleBoxFlat" id=2]
bg_color = Color( 1, 1, 1, 0.0509804 )
expand_margin_left = 10.0
expand_margin_right = 10.0
expand_margin_top = 10.0
expand_margin_bottom = 10.0

[sub_resource type="DynamicFont" id=3]
size = 17
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=4]
size = 12
outline_color = Color( 0, 0, 0, 1 )
extra_spacing_top = -2
font_data = ExtResource( 5 )

[sub_resource type="StyleBoxFlat" id=5]
bg_color = Color( 0.423529, 0.423529, 0.423529, 1 )
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4
shadow_color = Color( 0.117188, 0.117188, 0.117188, 0.54902 )
shadow_size = 4
anti_aliasing = false

[sub_resource type="StyleBoxFlat" id=6]
bg_color = Color( 0.25098, 0.25098, 0.25098, 1 )
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4
shadow_color = Color( 0.0390625, 0.0390625, 0.0390625, 0.54902 )
shadow_size = 4
anti_aliasing = false

[sub_resource type="StyleBoxFlat" id=7]
bg_color = Color( 0.352941, 0.352941, 0.352941, 1 )
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4
shadow_color = Color( 0.078125, 0.078125, 0.078125, 0.54902 )
shadow_size = 4
anti_aliasing = false

[sub_resource type="DynamicFont" id=8]
size = 12
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 1 )

[sub_resource type="StyleBoxFlat" id=9]
bg_color = Color( 0.180392, 0.180392, 0.180392, 1 )
draw_center = false
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color( 1, 1, 1, 1 )
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4
expand_margin_left = 15.0
expand_margin_right = 15.0
expand_margin_top = 2.0
expand_margin_bottom = 2.0
shadow_color = Color( 0.0509804, 0.0509804, 0.0509804, 0.6 )
anti_aliasing = false

[sub_resource type="DynamicFont" id=10]
size = 14
font_data = ExtResource( 1 )

[node name="Patch Notes" type="MarginContainer"]
margin_right = 400.0
margin_bottom = 300.0
rect_min_size = Vector2( 400, 300 )
size_flags_horizontal = 4
size_flags_vertical = 4
custom_constants/margin_right = 10
custom_constants/margin_top = 10
custom_constants/margin_left = 10
custom_constants/margin_bottom = 10
script = SubResource( 11 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="bg" type="Panel" parent="."]
margin_left = 10.0
margin_top = 10.0
margin_right = 390.0
margin_bottom = 290.0
custom_styles/panel = SubResource( 1 )

[node name="v" type="VBoxContainer" parent="."]
margin_left = 10.0
margin_top = 10.0
margin_right = 390.0
margin_bottom = 290.0
custom_constants/separation = 10

[node name="header" type="MarginContainer" parent="v"]
margin_right = 380.0
margin_bottom = 58.0
custom_constants/margin_right = 10
custom_constants/margin_top = 10
custom_constants/margin_left = 10
custom_constants/margin_bottom = 10
__meta__ = {
"_edit_use_anchors_": false
}

[node name="bg" type="Panel" parent="v/header"]
margin_left = 10.0
margin_top = 10.0
margin_right = 370.0
margin_bottom = 48.0
custom_styles/panel = SubResource( 2 )

[node name="v" type="VBoxContainer" parent="v/header"]
margin_left = 10.0
margin_top = 10.0
margin_right = 370.0
margin_bottom = 48.0
custom_constants/separation = 4
alignment = 1

[node name="name" type="Label" parent="v/header/v"]
self_modulate = Color( 1, 0, 0.631373, 1 )
margin_left = 133.0
margin_right = 226.0
margin_bottom = 21.0
size_flags_horizontal = 4
custom_fonts/font = SubResource( 3 )
custom_colors/font_color = Color( 0.8, 0.8, 0.8, 1 )
text = "Patch Notes"
valign = 1

[node name="desc" type="Label" parent="v/header/v"]
margin_left = 44.0
margin_top = 25.0
margin_right = 316.0
margin_bottom = 38.0
size_flags_horizontal = 4
custom_fonts/font = SubResource( 4 )
custom_colors/font_color = Color( 0.804688, 0.804688, 0.804688, 1 )
text = "Changes made since the last time you played (%s)!"

[node name="sc" type="ScrollContainer" parent="v"]
margin_top = 68.0
margin_right = 380.0
margin_bottom = 234.0
size_flags_vertical = 3
scroll_horizontal_enabled = false

[node name="v" type="VBoxContainer" parent="v/sc"]
margin_right = 380.0
size_flags_horizontal = 3
custom_constants/separation = 10

[node name="buy" type="MarginContainer" parent="v"]
margin_left = 145.0
margin_top = 244.0
margin_right = 235.0
margin_bottom = 280.0
mouse_filter = 2
size_flags_horizontal = 4
custom_constants/margin_right = 15
custom_constants/margin_top = 2
custom_constants/margin_left = 15
custom_constants/margin_bottom = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="button" type="Button" parent="v/buy"]
self_modulate = Color( 1, 0, 0.631373, 1 )
margin_left = 15.0
margin_top = 2.0
margin_right = 75.0
margin_bottom = 34.0
rect_min_size = Vector2( 60, 32 )
focus_mode = 0
mouse_default_cursor_shape = 2
custom_styles/hover = SubResource( 5 )
custom_styles/pressed = SubResource( 6 )
custom_styles/normal = SubResource( 7 )
custom_fonts/font = SubResource( 8 )
enabled_focus_mode = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="m" type="MarginContainer" parent="v/buy"]
margin_left = 15.0
margin_top = 2.0
margin_right = 75.0
margin_bottom = 34.0
mouse_filter = 2
custom_constants/margin_right = 15
custom_constants/margin_top = 2
custom_constants/margin_left = 15
custom_constants/margin_bottom = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="afford" type="Panel" parent="v/buy/m"]
visible = false
self_modulate = Color( 1, 0, 0.631373, 1 )
margin_left = 15.0
margin_top = 2.0
margin_right = 45.0
margin_bottom = 30.0
mouse_filter = 2
custom_styles/panel = SubResource( 9 )

[node name="text" type="Label" parent="v/buy/m"]
modulate = Color( 0.703125, 0.703125, 0.703125, 1 )
margin_left = 15.0
margin_top = 7.0
margin_right = 45.0
margin_bottom = 24.0
custom_fonts/font = SubResource( 10 )
custom_colors/font_color_shadow = Color( 0, 0, 0, 1 )
text = "a"
align = 1

[connection signal="pressed" from="v/buy/button" to="." method="_on_button_pressed"]
